<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weather Forecast</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      color: #333;
      background: linear-gradient(-45deg, #89f7fe, #66a6ff, #a1c4fd, #c2e9fb);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .clouds {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: none;
    }

    .cloud {
      position: absolute;
      background: url('https://i.ibb.co/vxcJzWx/cloud.png') no-repeat;
      background-size: contain;
      width: 200px;
      height: 100px;
      animation: moveCloud 60s linear infinite;
      opacity: 0.4;
    }

    .cloud:nth-child(2) {
      top: 20%;
      left: -300px;
      animation-delay: 15s;
    }

    .cloud:nth-child(3) {
      top: 60%;
      left: -500px;
      animation-delay: 30s;
    }

    @keyframes moveCloud {
      from { left: -300px; }
      to { left: 110%; }
    }

    .container {
      max-width: 600px;
      margin: auto;
      background: rgba(255, 255, 255, 0.9);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      text-align: center;
      z-index: 1;
    }

    h1 {
      margin-bottom: 20px;
    }

    .search-box {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }

    .search-box input {
      padding: 12px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .search-box button {
      padding: 12px;
      font-size: 1rem;
      background-color: #0077b6;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .search-box button:hover {
      background-color: #023e8a;
    }

    .forecast {
      margin-top: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 15px;
    }

    .forecast-card {
      background: #caf0f8;
      padding: 15px;
      border-radius: 10px;
    }

    img {
      width: 60px;
    }

    #weatherOutput p {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <!-- Animated clouds -->
  <div class="clouds">
    <div class="cloud" style="top: 10%;"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
  </div>

  <div class="container">
    <h1>üå¶Ô∏è Weather Forecast</h1>
    <div class="search-box">
      <input type="text" id="cityInput" placeholder="Enter city name">
      <button onclick="getWeather()">Search</button>
      <button onclick="getLocation()">üìç Use My Location</button>
    </div>
    <div id="weatherOutput"></div>
  </div>

  <script>
    const apiKey = "fec33c46e30f10455caac13e10244322"; // ‚¨ÖÔ∏è Replace with your actual OpenWeatherMap API key

    function getWeather() {
      const city = document.getElementById("cityInput").value.trim();
      if (!city) {
        alert("Please enter a city name.");
        return;
      }
      fetchWeatherData(`q=${city}`);
    }

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          fetchWeatherData(`lat=${lat}&lon=${lon}`);
        }, () => {
          document.getElementById("weatherOutput").innerHTML = `<p>Location access denied.</p>`;
        });
      } else {
        alert("Geolocation not supported.");
      }
    }

    function fetchWeatherData(query) {
      const url = `https://api.openweathermap.org/data/2.5/forecast?${query}&appid=${apiKey}&units=metric`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          console.log(data);
          if (data.cod !== "200") {
            document.getElementById("weatherOutput").innerHTML = `<p>City not found or API error.</p>`;
            return;
          }
          displayForecast(data);
        })
        .catch(err => {
          console.error(err);
          document.getElementById("weatherOutput").innerHTML = `<p>Error fetching data.</p>`;
        });
    }

    function displayForecast(data) {
      if (!data.city || !data.list) {
        document.getElementById("weatherOutput").innerHTML = `<p>Unable to get forecast data.</p>`;
        return;
      }

      const cityName = data.city.name;
      const country = data.city.country;
      const list = data.list;

      let html = `<h2>Weather in ${cityName}, ${country}</h2><div class="forecast">`;

      const daily = {};

      list.forEach(item => {
        const date = item.dt_txt.split(" ")[0];
        if (!daily[date]) {
          daily[date] = item;
        }
      });

      const dates = Object.keys(daily).slice(0, 5);
      dates.forEach(date => {
        const info = daily[date];
        const temp = info.main.temp;
        const desc = info.weather[0].description;
        const icon = info.weather[0].icon;

        html += `
          <div class="forecast-card">
            <h4>${date}</h4>
            <img src="http://openweathermap.org/img/wn/${icon}@2x.png" alt="${desc}" />
            <p>${desc}</p>
            <p>üå°Ô∏è ${temp} ¬∞C</p>
          </div>`;
      });

      html += `</div>`;
      document.getElementById("weatherOutput").innerHTML = html;
    }
  </script>
</body>
</html>
